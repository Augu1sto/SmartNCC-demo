(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-usercenter-editAvatar"],{"0ac9":function(e,t,a){"use strict";var i=a("4ea4");a("4de4"),a("d81d"),a("45fc"),a("d3b7"),a("ac1f"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a("d3d2"),n=i(a("13da")),o=i(a("72e3")),r={name:"u-upload",mixins:[uni.$u.mpMixin,uni.$u.mixin,n.default,o.default],data:function(){return{lists:[],isInCount:!0}},watch:{fileList:{immediate:!0,handler:function(){this.formatFileList()}}},methods:{formatFileList:function(){var e=this,t=this.fileList,a=void 0===t?[]:t,i=this.maxCount,u=a.map((function(t){return Object.assign(Object.assign({},t),{isImage:"image"===e.accept||uni.$u.test.image(t.url||t.thumb),isVideo:"video"===e.accept||uni.$u.test.video(t.url||t.thumb),deletable:"boolean"===typeof t.deletable?t.deletable:e.deletable})}));this.lists=u,this.isInCount=u.length<i},chooseFile:function(){var e=this,t=this.maxCount,a=this.multiple,i=this.lists,n=this.disabled;if(!n){var o;try{o=uni.$u.test.array(this.capture)?this.capture:this.capture.split(",")}catch(r){o=[]}(0,u.chooseFile)(Object.assign({accept:this.accept,multiple:this.multiple,capture:o,compressed:this.compressed,maxDuration:this.maxDuration,sizeType:this.sizeType,camera:this.camera},{maxCount:t-i.length})).then((function(t){e.onBeforeRead(a?t:t[0])})).catch((function(t){e.$emit("error",t)}))}},onBeforeRead:function(e){var t=this,a=this.beforeRead,i=this.useBeforeRead,u=!0;uni.$u.test.func(a)&&(u=a(e,this.getDetail())),i&&(u=new Promise((function(a,i){t.$emit("beforeRead",Object.assign(Object.assign({file:e},t.getDetail()),{callback:function(e){e?a():i()}}))}))),u&&(uni.$u.test.promise(u)?u.then((function(a){return t.onAfterRead(a||e)})):this.onAfterRead(e))},getDetail:function(e){return{name:this.name,index:null==e?this.fileList.length:e}},onAfterRead:function(e){var t=this.maxSize,a=this.afterRead,i=Array.isArray(e)?e.some((function(e){return e.size>t})):e.size>t;i?this.$emit("oversize",Object.assign({file:e},this.getDetail())):("function"===typeof a&&a(e,this.getDetail()),this.$emit("afterRead",Object.assign({file:e},this.getDetail())))},deleteItem:function(e){this.$emit("delete",Object.assign(Object.assign({},this.getDetail(e)),{file:this.fileList[e]}))},onPreviewImage:function(e){var t=this;e.isImage&&this.previewFullImage&&uni.previewImage({urls:this.lists.filter((function(e){return"image"===t.accept||uni.$u.test.image(e.url||e.thumb)})).map((function(e){return e.url||e.thumb})),current:e.url||e.thumb,fail:function(){uni.$u.toast("预览图片失败")}})},onPreviewVideo:function(e){if(this.data.previewFullImage){var t=e.currentTarget.dataset.index,a=this.data.lists;wx.previewMedia({sources:a.filter((function(e){return isVideoFile(e)})).map((function(e){return Object.assign(Object.assign({},e),{type:"video"})})),current:t,fail:function(){uni.$u.toast("预览视频失败")}})}},onClickPreview:function(e){var t=e.currentTarget.dataset.index,a=this.data.lists[t];this.$emit("clickPreview",Object.assign(Object.assign({},a),this.getDetail(t)))}}};t.default=r},"0cbc":function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var i={uUpload:a("3f60").default,uButton:a("02f6").default},u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"upload-box"},[i("u-upload",{attrs:{fileList:e.upImage,multiple:!0,maxCount:"1",width:"120",height:"120",radius:"20"},on:{afterRead:function(t){arguments[0]=t=e.$handleEvent(t),e.afterRead.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deletePic.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{width:"120px",height:"120px"},attrs:{src:a("392e"),mode:"widthFix"}})],1)],1),i("v-uni-view",{staticClass:"btn-area"},[i("u-button",{attrs:{color:"#00adb5",plain:!0,shape:"circle",hairline:!0,text:"确认修改"}})],1)],1)},n=[]},"13da":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={watch:{accept:{immediate:!0,handler:function(e){"all"!==e&&"media"!==e||uni.$u.error("只有微信小程序才支持把accept配置为all、media之一")}}}};t.default=i},"1ee4":function(e,t,a){var i=a("dca7");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var u=a("4f06").default;u("3010965a",i,!0,{sourceMap:!1,shadowMode:!1})},"23ae":function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("d81d"),a("a434"),a("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=i(a("5530"));a("96cf");var n=i(a("1da1")),o={data:function(){return{upImage:[]}},methods:{deletePic:function(e){this["upImage"].splice(e.index,1)},afterRead:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var i,n,o,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=[].concat(e.file),n=t["upImage"].length,i.map((function(e){t["upImage"].push((0,u.default)((0,u.default)({},e),{},{status:"uploading",message:"上传中"}))})),o=0;case 4:if(!(o<i.length)){a.next=14;break}return a.next=7,t.uploadFilePromise(i[o].url);case 7:r=a.sent,s=t["upImage"][n],t["upImage"].splice(n,1,Object.assign(s,{status:"success",message:"",url:r})),n++;case 11:o++,a.next=4;break;case 14:case"end":return a.stop()}}),a)})))()},uploadFilePromise:function(e){return new Promise((function(t,a){uni.uploadFile({url:"",filePath:e,name:"file",formData:{},success:function(e){setTimeout((function(){t(e.data.data)}),1e3)}})}))}}};t.default=o},"265e":function(e,t,a){"use strict";a.r(t);var i=a("0cbc"),u=a("493d");for(var n in u)"default"!==n&&function(e){a.d(t,e,(function(){return u[e]}))}(n);a("a823");var o,r=a("f0c5"),s=Object(r["a"])(u["default"],i["b"],i["c"],!1,null,"e89c6806",null,!1,i["a"],o);t["default"]=s.exports},"30f1":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".upload-box[data-v-e89c6806]{background-color:#fff;margin:%?50?% auto;width:120px;height:120px;padding:5px;border-radius:25px;box-shadow:0 0 %?10?% #ddd}\n\t\n/* \timage, uni-image, .u-upload__status{\n\t\tborder-radius: 20px!important;\n\t} */",""]),e.exports=t},"392e":function(e,t,a){e.exports=a.p+"static/img/upload_avatar.e8701106.png"},"3f60":function(e,t,a){"use strict";a.r(t);var i=a("fa12"),u=a("c561");for(var n in u)"default"!==n&&function(e){a.d(t,e,(function(){return u[e]}))}(n);a("df93");var o,r=a("f0c5"),s=Object(r["a"])(u["default"],i["b"],i["c"],!1,null,"57abb8ea",null,!1,i["a"],o);t["default"]=s.exports},"493d":function(e,t,a){"use strict";a.r(t);var i=a("23ae"),u=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=u.a},"695a":function(e,t,a){var i=a("30f1");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var u=a("4f06").default;u("c08b4e68",i,!0,{sourceMap:!1,shadowMode:!1})},"72e3":function(e,t,a){"use strict";a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{accept:{type:String,default:uni.$u.props.upload.accept},capture:{type:[String,Array],default:uni.$u.props.upload.capture},compressed:{type:Boolean,default:uni.$u.props.upload.compressed},camera:{type:String,default:uni.$u.props.upload.camera},maxDuration:{type:Number,default:uni.$u.props.upload.maxDuration},uploadIcon:{type:String,default:uni.$u.props.upload.uploadIcon},uploadIconColor:{type:String,default:uni.$u.props.upload.uploadIconColor},useBeforeRead:{type:Boolean,default:uni.$u.props.upload.useBeforeRead},afterRead:{type:Function,default:null},beforeRead:{type:Function,default:null},previewFullImage:{type:Boolean,default:uni.$u.props.upload.previewFullImage},maxCount:{type:[String,Number],default:uni.$u.props.upload.maxCount},disabled:{type:Boolean,default:uni.$u.props.upload.disabled},imageMode:{type:String,default:uni.$u.props.upload.imageMode},name:{type:String,default:uni.$u.props.upload.name},sizeType:{type:Array,default:uni.$u.props.upload.sizeType},multiple:{type:Boolean,default:uni.$u.props.upload.multiple},deletable:{type:Boolean,default:uni.$u.props.upload.deletable},maxSize:{type:[String,Number],default:uni.$u.props.upload.maxSize},fileList:{type:Array,default:uni.$u.props.upload.fileList},uploadText:{type:String,default:uni.$u.props.upload.uploadText},width:{type:[String,Number],default:uni.$u.props.upload.width},height:{type:[String,Number],default:uni.$u.props.upload.height},radius:{type:[String,Number],default:uni.$u.props.upload.radius},previewImage:{type:Boolean,default:uni.$u.props.upload.previewImage}}};t.default=i},a823:function(e,t,a){"use strict";var i=a("695a"),u=a.n(i);u.a},c561:function(e,t,a){"use strict";a.r(t);var i=a("0ac9"),u=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=u.a},d3d2:function(e,t,a){"use strict";var i=a("4ea4");a("caad"),a("d81d"),a("13d5"),a("b64b"),a("d3b7"),a("25f0"),a("2532"),Object.defineProperty(t,"__esModule",{value:!0}),t.chooseFile=l;var u=i(a("5530"));function n(e,t){return["[object Object]","[object File]"].includes(Object.prototype.toString.call(e))?Object.keys(e).reduce((function(a,i){return t.includes(i)||(a[i]=e[i]),a}),{}):{}}function o(e){return e.tempFiles.map((function(e){return(0,u.default)((0,u.default)({},n(e,["path"])),{},{type:"image",url:e.path,thumb:e.path,size:e.size,name:e.name})}))}function r(e){return[(0,u.default)((0,u.default)({},n(e,["tempFilePath","thumbTempFilePath","errMsg"])),{},{type:"video",url:e.tempFilePath,thumb:e.thumbTempFilePath,size:e.size,name:e.name})]}function s(e){return e.tempFiles.map((function(e){return(0,u.default)((0,u.default)({},n(e,["path"])),{},{url:e.path,size:e.size,name:e.name,type:e.type})}))}function l(e){var t=e.accept,a=e.multiple,i=e.capture,u=e.compressed,n=e.maxDuration,l=e.sizeType,d=e.camera,c=e.maxCount;return new Promise((function(e,p){switch(t){case"image":uni.chooseImage({count:a?Math.min(c,9):1,sourceType:i,sizeType:l,success:function(t){return e(o(t))},fail:p});break;case"video":uni.chooseVideo({sourceType:i,compressed:u,maxDuration:n,camera:d,success:function(t){return e(r(t))},fail:p});break;case"file":uni.chooseFile({count:a?c:1,type:t,success:function(t){return e(s(t))},fail:p});break;default:uni.chooseFile({count:a?c:1,type:"all",success:function(t){return e(s(t))},fail:p})}}))}},dca7:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* uni.scss */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-57abb8ea], uni-scroll-view[data-v-57abb8ea], uni-swiper-item[data-v-57abb8ea]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.u-upload[data-v-57abb8ea]{display:flex;flex-direction:column;flex:1}.u-upload__wrap[data-v-57abb8ea]{display:flex;flex-direction:row;flex-wrap:wrap;flex:1}.u-upload__wrap__preview[data-v-57abb8ea]{border-radius:2px;margin:0 8px 8px 0;position:relative;overflow:hidden;display:flex;flex-direction:row}.u-upload__wrap__preview__image[data-v-57abb8ea]{width:80px;height:80px}.u-upload__wrap__preview__other[data-v-57abb8ea]{width:80px;height:80px;background-color:#f2f2f2;flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center}.u-upload__wrap__preview__other__text[data-v-57abb8ea]{font-size:11px;color:#909193;margin-top:2px}.u-upload__deletable[data-v-57abb8ea]{position:absolute;top:0;right:0;background-color:#373737;height:14px;width:14px;display:flex;flex-direction:row;border-bottom-left-radius:100px;align-items:center;justify-content:center;z-index:3}.u-upload__deletable__icon[data-v-57abb8ea]{position:absolute;-webkit-transform:scale(.7);transform:scale(.7);top:0;right:0;top:1px;right:0}.u-upload__success[data-v-57abb8ea]{position:absolute;bottom:0;right:0;display:flex;flex-direction:row;border-style:solid;border-top-color:transparent;border-left-color:transparent;border-bottom-color:#5ac725;border-right-color:#5ac725;border-width:9px;align-items:center;justify-content:center}.u-upload__success__icon[data-v-57abb8ea]{position:absolute;-webkit-transform:scale(.7);transform:scale(.7);bottom:-10px;right:-10px}.u-upload__status[data-v-57abb8ea]{position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;align-items:center;justify-content:center}.u-upload__status__icon[data-v-57abb8ea]{position:relative;z-index:1}.u-upload__status__message[data-v-57abb8ea]{font-size:12px;color:#fff;margin-top:5px}.u-upload__button[data-v-57abb8ea]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:80px;height:80px;background-color:#f4f5f7;border-radius:2px;margin:0 8px 8px 0;box-sizing:border-box}.u-upload__button__text[data-v-57abb8ea]{font-size:11px;color:#909193;margin-top:2px}.u-upload__button--hover[data-v-57abb8ea]{background-color:#e6e7e9}.u-upload__button--disabled[data-v-57abb8ea]{opacity:.5}',""]),e.exports=t},df93:function(e,t,a){"use strict";var i=a("1ee4"),u=a.n(i);u.a},fa12:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var i={uIcon:a("1645").default,uLoadingIcon:a("0c2f").default},u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"u-upload",style:[e.$u.addStyle(e.customStyle)]},[a("v-uni-view",{staticClass:"u-upload__wrap"},[e.previewImage?e._l(e.lists,(function(t,i){return a("v-uni-view",{key:i,staticClass:"u-upload__wrap__preview"},[t.isImage||t.type&&"image"===t.type?a("v-uni-image",{staticClass:"u-upload__wrap__preview__image",style:[{height:e.$u.addUnit(e.height),width:e.$u.addUnit(e.width),borderRadius:e.$u.addUnit(e.radius)}],attrs:{src:t.thumb||t.url,mode:e.imageMode},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onPreviewImage(t)}}}):a("v-uni-view",{staticClass:"u-upload__wrap__preview__other"},[a("u-icon",{attrs:{color:"#80CBF9",size:"26",name:t.isVideo||t.type&&"video"===t.type?"movie":"folder"}}),a("v-uni-text",{staticClass:"u-upload__wrap__preview__other__text"},[e._v(e._s(t.isVideo||t.type&&"video"===t.type?"视频":"文件"))])],1),"uploading"===t.status||"failed"===t.status?a("v-uni-view",{staticClass:"u-upload__status",style:{borderRadius:e.$u.addUnit(e.radius)}},[a("v-uni-view",{staticClass:"u-upload__status__icon"},["failed"===t.status?a("u-icon",{attrs:{name:"close-circle",color:"#ffffff",size:"25"}}):a("u-loading-icon",{attrs:{size:"22",mode:"circle",color:"#ffffff"}})],1),t.message?a("v-uni-text",{staticClass:"u-upload__status__message"},[e._v(e._s(t.message))]):e._e()],1):e._e(),"uploading"!==t.status&&(e.deletable||t.deletable)?a("v-uni-view",{staticClass:"u-upload__deletable",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.deleteItem(i)}}},[a("v-uni-view",{staticClass:"u-upload__deletable__icon"},[a("u-icon",{attrs:{name:"close",color:"#ffffff",size:"10"}})],1)],1):e._e(),"success"===t.status?a("v-uni-view",{staticClass:"u-upload__success"},[a("v-uni-view",{staticClass:"u-upload__success__icon"},[a("u-icon",{attrs:{name:"checkmark",color:"#ffffff",size:"12"}})],1)],1):e._e()],1)})):e._e(),e.isInCount?[e.$slots.default||e.$slots.$default?a("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseFile.apply(void 0,arguments)}}},[e._t("default")],2):a("v-uni-view",{staticClass:"u-upload__button",class:[e.disabled&&"u-upload__button--disabled"],style:[{width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)}],attrs:{"hover-class":e.disabled?"":"u-upload__button--hover","hover-stay-time":"150"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseFile.apply(void 0,arguments)}}},[a("u-icon",{attrs:{name:e.uploadIcon,size:"26",color:e.uploadIconColor}}),e.uploadText?a("v-uni-text",{staticClass:"u-upload__button__text"},[e._v(e._s(e.uploadText))]):e._e()],1)]:e._e()],2)],1)},n=[]}}]);